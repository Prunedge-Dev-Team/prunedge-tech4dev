// const jobs2 = [

//   {
//     id: "Placement-lead",
//     title: "Placement Lead",
//     synopsis:
//       "We are looking for an experienced Placement Lead.",
//     location: "Lagos, Nigeria",
//     description: `
           
//         `,
//     responsibilities: [
//      `Secure partnership internship placement for all beneficiaries on all programs`,
//     `Facilitate the interviewing of beneficiaries to assist in completion of placement assistance request forms;`, 
//     `Maintain files of beneficiaries; conduct pre-screening of beneficiaries to verify qualifications`,
//     `Supervise the receiving of internship offers from employers; match beneficiaries to jobs and maintain records of alumni/beneficiaries placed in jobs`,
//     `Analyze available job market economic data and information`,
//     `Research job market trends and requirements for a variety of occupations`,
//     `Coordinate contractual relationships with a variety of technology organizations`,
//     ],
//     requirements:[
//       `Minimum of two years’ full-time experience in a Human Resource role.`,
//       `Bachelor's degree in Human Resources or any other relevant field`,
//     ],
//     skills: [
//       `Efficient time management and prioritization skills are essential `,
//       `Work independently with little direction`,
//       `Strong attention to details`,
//       `Proven ability to negotiate Experience in Technology Industry is a plus`,
//       `Excellent written and verbal communications skills, including networking skills with people at all levels internally and externally`,
//       `Proven talent at building relationships and influencing without authority to produce results and outcomes.`,
//       `Proficient in utilizing Microsoft Office Suite; and confident learning other programs and technology tools to execute in this role`,

//     ],
//     status:"closed",
//   },
//   {
//     id: "Programs-intern",
//     title: "Programs Intern",
//     synopsis:
//       "We are looking for a Programs Intern.",
//     location: "Lagos, Nigeria",
//     description: `
           
//         `,
//     responsibilities: [
//       `Provide support to your direct report and program manager in implementing key program deliverables`,
//       `Provide support for creation and review of key program documentation`,
//       `Participate in program monitoring and evaluation to ensure end line deliverables are properly tracked`,
//     ],
//     requirements:[
//       `Minimum 0f 6 months experience in Programs or Project management`,
//       `Bachelors’ degree in a related field`,
    
//     ],
//     skills: [
//       `Strong analytical skills`,
//       `Critical thinking and problem-solving skills`,
//       `Excellent time-management skills`,
//       `Excellent interpersonal, presentation and communication skills`,
//     ],
//     status:"closed",
//   },
// ];


// const jobs1 = [
//   {
//     id: "hr-Intern",
//     title: "HR Intern",
//     synopsis:
//       "We are looking for HR Intern",
//     location: "Lagos, Nigeria",
//     description: `
         
//         `,
//     responsibilities: [
//       `Assist with the recruitment process by identifying candidates, performing reference checks and issuing employment contracts`,
//       `Maintain calendars of HR management team`, 
//       `Assist with performance management procedures`, 
//       `Schedule meetings, interviews, HR events and maintain agendas`, 
//       `Produce and submit reports on general HR activity`,  
//       `Maintain digital and electronic records of employees`, 
//       `Perform orientation and update records of new team members`,
//       `Coordinate training sessions and seminars`,

//     ],
//     requirements: [
//       `Minimum of 6 months work experience in Human Resources Management or a related field`,
//       `Bachelors’ degree in Human Resources Management or related field`,
//       `Ability to maintain confidentiality of documents and other personal information`,
//     ],
//     skills: [
//       `Critical thinking and problem-solving skills`,
//       `Excellent time-management skills`,
//       `Excellent interpersonal, presentation and communication skills`,
//       `Proficient in MS Office`,
//     ],
//     status:"closed",
//   },
//   {
//     id: "partnerships-intern",
//     title: "Partnerships and Sustainability Intern",
//     synopsis:
//       "We are looking for a Partnerships and Sustainability Intern.",
//     location: "Abuja, Nigeria",
//     description: `
           
//         `,
//     responsibilities: [
//       `Provide support to the Partnerships and Susutainability Lead in implementing key deliverables of the department`,
//       `Provide support in sourcing and writing grant applications within applicable deadlines`,
//       `Provide support in drafting letters, MoUs and other official documentation`,
//       `Provide support in managing partners and stakeholders, including curating, scheduling and documenting partnership correspondence.`,
//     ],
//     requirements:[
//       `Minimum of 6 months work experience in a Partnerships and Sustainability role or a related field.`,
//       `Bachelors’ degree in a related field`,
    
//     ],
//     skills: [
//       `Strong writing skills`,
//       `Critical thinking and problem-solving skills`,
//       `Excellent time-management skills`,
//       `Excellent interpersonal, presentation and communication skills`,
//     ],
//     status:"closed",
//   },

//    {
//     id: "instructional-design-lead",
//     title: "Instructional Design Lead (full time role)",
//     synopsis:
//       "We are looking for an instructional Design Lead.",
//     location: "Lagos, Nigeria",
//     description: `
           
//         `,
//     responsibilities: [
//       `Creating engaging learning activities and compelling course content for all programs`,
//       `Providing assessments and activities that enhance the learning process of beneficiaries`,
//       `Conducting train-the-trainer classes for facilitators`,
//       `Maintaining program documentation.`,
//       `Supervise learning programs delivery and implementation `,
//       `Assessing learning needs of beneficiaries`,
//       `Staying abreast of the latest trends and best-practices in the eLearning and instructional design community in order to enhance and expand on training objects and deliverables`,
      
//     ],
//     requirements:[
//       `Minimum of 2 - 3 years’ experience in a Lead Facilitation role (Tech facilitation is an advantage)`,
//       `B.Sc. in Educational management/Technology, Instructional design or similar field`,
    
//     ],
//     skills: [
//       `Solid knowledge of course development `,
//       `Knowledge of Information Technology`,
//       `Experience with LMS platform is a plus`,
//       `Excellent knowledge of learning theories and instructional design models`,
//       `Lesson and curriculum planning skills`,
//       `Excellent verbal and written communication skills`,
//       `Understanding of varied learning styles`,
//       `Knowledge of assessment and evaluation methods`,
//       `Must be open to learning new skills`,
//     ],
//     status:"closed",
//   },
// {
//   id: "Programs-intern",
//   title: "Programs Intern",
//   synopsis:
//     "We are looking for a Programs Intern.",
//   location: "Lagos, Nigeria",
//   description: `
             
//     `,
//   responsibilities: [
//     `Provide support to your direct report and program manager in implementing key program deliverables`,
//     `Provide support for creation and review of key program documentation`,
//     `Participate in program monitoring and evaluation to ensure end line deliverables are properly tracked`,
//   ],
//   requirements:[
//     `Minimum 0f 6 months experience in Programs or Project management`,
//     `Bachelors’ degree in a related field`,
  
//   ],
//   skills: [
//     `Strong analytical skills`,
//     `Critical thinking and problem-solving skills`,
//     `Excellent time-management skills`,
//     `Excellent interpersonal, presentation and communication skills`,
//   ],
//   status:"open",
// },
// ];


const jobs = [
    {
    id: "communications-anager",
    title: "Communications Manager",
    synopsis:
      "We are looking for a Communications Manager.",
    location: "Lagos, Nigeria",
    description: `
               
      `,
    responsibilities: [
      ` Developing, managing and implementing our global communications strategy to raise the profile and the visibility of Tech4Dev, in line with our External Relations strategy and our advocacy activities.`,
      ` Ensuring consistency of strategy, messaging and brand identity compliance 
      across all the organization and providing a solid framework for all colleagues 
      and members to effectively communicate with external stakeholders`,
      ` Responsible for managing the design, storytelling and digital media leads 
      and team`,
      `Identifying and engaging around media and press opportunities`,
      ` Responsible for driving thought leadership and building media/press 
      relations`,
      ` Responsible for editing of all content across all platforms as well as for 
      articles, external communication materials and media content creation`,
      ` Ensuring all messaging across all media platforms aligns with key 
      organizational strategies`,
      ` Brainstorm and collaborate with teams for new communications ideas and 
      strategies`,
      `Develop communications strategies for initiative launches, and advocacy`,
      `Responsible for managing and growing the overall organization brand`,
      ` Responsible for ensuring planning and success of events and brand related 
      engagements`,
      `Responsible for managing the communications and media budget`,
    ],
    requirements:[
      `Minimum of 5 years work experience in a Communications Role`,
      ` Minimum of 2 years’ experience in Impact Storytelling within a Non-Profit 
      Organisation`,
      `Minimum of 1 year experience in a leadership position`,
    
    ],
    skills: [
      `Excellent Interpersonal and Communication skills`,
      `Outstanding social media engagement (Social media Savviness)`,
      `Strong writing, editing and Copyrighting skills`,
      `Creativity: Ability to ‘think outside the box`,
      `Most important criterion: Passion for Non-Profit and willingness to learn`,
    ],
    status:"open",
  },

    {
    id: "Programs-intern",
    title: "Programs Intern",
    synopsis:
      "We are looking for a Programs Intern.",
    location: "Lagos, Nigeria",
    description: `
               
      `,
    responsibilities: [
      `Provide support to your direct report and program manager in implementing key program deliverables`,
      `Provide support for creation and review of key program documentation`,
      `Participate in program monitoring and evaluation to ensure end line deliverables are properly tracked`,
    ],
    requirements:[
      `Minimum 0f 6 months experience in Programs or Project management`,
      `Bachelors’ degree in a related field`,
    
    ],
    skills: [
      `Strong analytical skills`,
      `Critical thinking and problem-solving skills`,
      `Excellent time-management skills`,
      `Excellent interpersonal, presentation and communication skills`,
    ],
    status:"open",
  },


    {
    id: "programs-associate",
    title: "Programs Associate",
    synopsis:
      "We are looking for an experienced programs Associate",
    location: "Lagos, Nigeria",
    description: `
         
        `,
    responsibilities: [
      `Strategize and outline goals and objectives of the program`,
      `Assign team members and volunteers to the different initiatives`, 
      `Estimate and implement program budgets`, 
      `Set program controls/governance/standards`, 
      `Monitor all initiatives through the entire program cycle, while managing the day-today detailed aspects of multiple initiatives`,  
      `Set timelines for goal posts/due dates`,
      `Coordinate and utilize resources for multiple projects in the program`, 
      `Communicate with individual initiative volunteers to address potential risks as well as resolve problems and issues`,
      `Communicate program objectives, goals, and progress to program directors, executives, upper management, and stakeholders`,
      `Set objectives to maximize ROI; prepare and present progress and budget reports to the leadership team as well as relevant advisory board members and Trustees`,
       `Assist team members and volunteers when needed to accomplish team goals`,
       `Create and implement the baseline and end line surveys for all initiatives as well 
       as ensure monitoring and evaluation of initiatives to ensure success and 
       outcomes of the initiatives`,
       `Manage program facilitators across all states`,

    ],
    requirements: [
      `Bachelors’ degree in a related field`,
      ` Minimum 1-2 years working experience in Product/Programs management 
      within a Non-Profit Organization`,
    ],
    skills: [
      `Proficiency in one coding language (Python, React, .Net, JavaScript, etc)`,
      `Strong analytical skills`,
      `Critical thinking and problem-solving skills`,
      `Excellent time-management skills`,
      `Excellent interpersonal, presentation and communication skills`,
      `Ability to understand business requirements and translate them into technical 
      requirements`,
    ],
    status:"open",
  },
  {
    id: "partnerships-and-sustainability-associate",
    title: "Partnerships and Sustainability Associate",
    synopsis:
      "We are looking for a partnerships and sustainability associate.",
    location: "Abuja, Nigeria",
    description: `
               
      `,
    responsibilities: [
      `Provide support to direct report and the Director of Partnerships and Sustainability in implementing key deliverables of the department`,
      `Provide support in sourcing grant applications`,
      `Track and report on success metrics, including audience reach, engagement, social media participation and more`,
      `Provide support in drafting letters, MoUs and other official documentation`,
      `Build tools and templates to strengthen the operations of the Partnerships Team, including proposal templates and guidance on the partnerships process.`,
      `Support in managing a portfolio of existing partnerships`,
      ` Provide support in managing partners and stakeholders, including curating, scheduling and documenting partnership correspondence`,
      `Provide creative ways of achieving deliverables in a timely manner`,
    ],
    requirements:[
      `Minimum 1 year’s work experience in a Partnerships and Sustainability or a related field.`,
      `Bachelors’ degree in a related field`,
    
    ],
    skills: [
      `Excellent research, writing and presentation skills, with strong potential for proposal development`,
      `Critical thinking and problem-solving skills`,
      `Excellent time-management skills`,
      `Excellent interpersonal, presentation and communication skills`,
      `Strong attention to details`,
      `Excellent written and verbal communications skills`,
      `Proficiency in utilizing Microsoft Office Suite`,
    ],
    status:"open",
  },
  {
    id: "grant-writer",
    title: "Grant Writer",
    synopsis:
      "We are looking for Grant Writer",
    location: "Lagos/Abuja, Nigeria",
    description: `
         
        `,
    responsibilities: [
      `Research and identify potential donors by reviewing Tech4Dev’s files, following up on leads and reading up on technology/digital transformation periodicals.`,
      `Write high-quality grant letters, proposals, narratives and applications requesting funds from individual, corporate and foundation prospects.`, 
      `Possess knowledge of procedures governing state, federal, and private grant proposal submissions, funder selection criteria and postaward funder expectations`, 
      `Identify new funders to support programs. Meet with program staff to determine funding needs and program planning.`, 
      `Maintain tracking system for grant, renewal, and report deadlines.`,  
      `Schedule grant proposals according to process and ensure all internal approvals are obtained prior to submission. Actively engage in ongoing prospect research to identify viable funding opportunities.`, 
    ],
    requirements: [
      ` Bachelors’ degree in English or any other relevant field.`,
      `Minimum of 2 years’ experience in research and creative writing.`,
      `Experience in non-profit industry is an added advantage.`,
    ],
    skills: [
      `Excellent written and verbal communications skills, including networking skills with people at all levels internally and externally.`,
      `Strong executive presence and interpersonal skills to effectively influence and interact with leadership, partners and donors.`,
      `High proficiency in Microsoft Office Suite and database programs`,
      `Must be accurate and detail oriented, possess strong organizational and time management skills and the ability to prioritize complex projects`,
      `Ability to work independently as well as collaboratively in a team environment`,

    ],
    status:"open",
  },
  
   {
    id: "instructional-design-lead",
    title: "Instructional Design Lead",
    synopsis:
      "We are looking for an instructional Design Lead.",
    location: "Lagos, Nigeria",
    description: `
           
        `,
    responsibilities: [
      `Creating engaging learning activities and compelling course content for all programs`,
      `Providing assessments and activities that enhance the learning process of beneficiaries`,
      `Conducting train-the-trainer classes for facilitators`,
      `Maintaining program documentation.`,
      `Supervise learning programs delivery and implementation `,
      `Assessing learning needs of beneficiaries`,
      `Staying abreast of the latest trends and best-practices in the eLearning and instructional design community in order to enhance and expand on training objects and deliverables`,
      
    ],
    requirements:[
      `Minimum of 2 - 3 years’ experience in a Lead Facilitation role (Tech facilitation is an advantage)`,
      `B.Sc. in Educational management/Technology, Instructional design or similar field`,
    
    ],
    skills: [
      `Solid knowledge of course development `,
      `Knowledge of Information Technology`,
      `Experience with LMS platform is a plus`,
      `Excellent knowledge of learning theories and instructional design models`,
      `Lesson and curriculum planning skills`,
      `Excellent verbal and written communication skills`,
      `Understanding of varied learning styles`,
      `Knowledge of assessment and evaluation methods`,
      `Must be open to learning new skills`,
    ],
    status:"open",
  },

  {
    id: "communications-intern",
    title: "Communications Intern",
    synopsis:
      "We are looking for a Communications Intern.",
    location: "Lagos, Nigeria",
    description: `
           
        `,
    responsibilities: [
      `Be responsible for social media accounts creation and management, increasing social media visibility through targeted organic & paid content push and management`,
      `Generate and manage the distribution and use of engaging media content (audio, video, blog, etc.)`,
      `Responsible for generating content for all communication materials as well as curating and managing Tech4Dev’s Newsletters and blog(s) `,
      `Ensuring all messaging across all media platforms align with key organizational strategies`,
      `Develop communications strategies for initiative launches, and advocacy `,
      `Brainstorm and collaborate with teams for new communications ideas and strategies•Develop weekly, monthly,quarterly, and annual media activity reports`,
      `Manage online community for Women Techsters`,
      
    ],
    requirements:[
      `Minimum of 6 monthswork experience in Communicationsor a related field`,
    ],
    skills: [
      `Excellent Interpersonal and Communication skills`,
      `Outstanding social media engagement (Social media Savviness)`,
      `Strong writing, editing and Copyrighting skills`,
      `Creativity: Ability to ‘think outside the box’`,
      `Most important criterion: Passion for Non-Profit and willingness to learn`,
    ],
    status:"open",
  },
    {
    id: "hr-Intern",
    title: "HR Intern",
    synopsis:
      "We are looking for HR Intern",
    location: "Lagos, Nigeria",
    description: `
         
        `,
    responsibilities: [
      `Assist with the recruitment process by identifying candidates, performing reference checks and issuing employment contracts`,
      `Maintain calendars of HR management team`, 
      `Assist with performance management procedures`, 
      `Schedule meetings, interviews, HR events and maintain agendas`, 
      `Produce and submit reports on general HR activity`,  
      `Maintain digital and electronic records of employees`, 
      `Perform orientation and update records of new team members`,
      `Coordinate training sessions and seminars`,

    ],
    requirements: [
      `Minimum of 6 months work experience in Human Resources Management or a related field`,
      `Bachelors’ degree in Human Resources Management or related field`,
      `Ability to maintain confidentiality of documents and other personal information`,
    ],
    skills: [
      `Critical thinking and problem-solving skills`,
      `Excellent time-management skills`,
      `Excellent interpersonal, presentation and communication skills`,
      `Proficient in MS Office`,
    ],
    status:"closed",
  },
];



const jobsListDiv = document.querySelector(".jobs-list");
const jobsDiv = document.querySelector(".jobs");
const jobsPreviewDiv = document.querySelector(".job-preview-section");

let currentRole = null;

const onJobClick = (id) => {
  if(jobs.find(({ id: jobId }) => jobId === id).status === "closed"){
    window.setStatus("error", true, "This offer has been closed");
  }else{
    jobsListDiv.classList.add("hide");
    jobsPreviewDiv.classList.remove("hide");
    jobsPreviewDiv.querySelector(`#${id}`).classList.add("is-active");
    currentRole = jobs.find(({ id: jobId }) => jobId === id).title;
    console.log(currentRole)
  }
  
};

document
  .querySelector(".job-preview__back-link")
  .addEventListener("click", (_) => {
    jobsListDiv.classList.remove("hide");
    jobsPreviewDiv.classList.add("hide");
    document
      .querySelector(".job-preview.is-active")
      .classList.remove("is-active");
  });

const generateJob = ({ location, title, synopsis, id }) => {
  const job = document.createElement("div");
  job.classList.add("job");

  const jobText = document.createElement("div");
  jobText.classList.add("job__text");

  jobText.innerHTML = `
        <p class="job__location">
            ${location}
        </p>
        <p class="job__title">
            ${title}
        </p>
        <p class="job__description">
            ${synopsis}
        </p>
    `;

  job.appendChild(jobText);

  const jobButton = document.createElement("button");
  jobButton.classList.add("job__link");

  jobButton.innerText = "Apply";

  jobButton.addEventListener("click", (_) => onJobClick(id));

  job.appendChild(jobText);
  job.appendChild(jobButton);

  return job;
};

const getSection = ({ header, items }) => {
  const itemsHTML = items.reduce((currentHtml, currentItem) => {
    currentHtml += `
            <p class="job-preview__section-item">
                ${currentItem}
            </p>
        `;

    return currentHtml;
  }, "");

  return `
        <div class="job-preview__section">
            <h3 class="job-preview__section-header">
                ${header}
            </h3>
            <div class="job-preview__section-items">
                ${itemsHTML}
            </div>
        </div>
    `;
};

const generateJobPreview = ({
  id,
  title,
  description,
  location,
  responsibilities,
  requirements,
  skills,
}) => {
  const jobPreview = document.createElement("div");
  jobPreview.classList.add("job-preview");
  jobPreview.id = id;

  jobPreview.innerHTML = `
        <h3 class="job-preview__header">
            ${title}
        </h3>
        <h5 class="job-preview__location">
            ${location}
        </h5>
        <p class="job-preview__description">
            ${description}
        </p>
        ${getSection({
          header: "Why we’re looking for you",
          items: responsibilities,
        })}
        ${getSection({ header: "What you should have", items: skills })}
        ${getSection({ header: "requirements", items: requirements })}
        ${getSection({ header: "What is required from you", items: skills })}
    `;

  return jobPreview;
};

window.addEventListener("DOMContentLoaded", (_) => {
  jobs.forEach((job) => {
    jobsDiv.appendChild(generateJob(job));
    jobsPreviewDiv
      .querySelector(".job-previews")
      .appendChild(generateJobPreview(job));
  });
});


[...document.querySelectorAll(".form__section")].forEach((section) => {
  const label = section.querySelector("label");
  const input = section.querySelector("input");

  input.addEventListener("focus", (_) => label.classList.add("is-focused"));

  const toggleLabel = (_) => {
    input.value.trim()
      ? label.classList.add("is-focused")
      : label.classList.remove("is-focused");
  };

  input.addEventListener("input", toggleLabel);

  input.addEventListener("blur", toggleLabel);
});

const resumeInput = document.querySelector(".resume__input");
const resumeFileWrapper = document.querySelector(".resume__file-wrapper");
const resumeReset = document.querySelector(".resume__file-reset");

let resumeFile = null;

resumeInput.addEventListener("change", (e) => {
  // const file = [...resumeInput.files].pop();
  const file = e.target.files[0];
  const fileShower = resumeFileWrapper.querySelector(".resume__file");
  fileShower.innerHTML = file.name;
  resumeFile = file;
  resumeFileWrapper.classList.add("is-showing");
});

resumeReset.addEventListener("click", (_) => {
  resumeFile = null;
  resumeFileWrapper.classList.remove("is-showing");
});

const form = document.querySelector("form");

const submitButton = document.querySelector(".form__submit-btn");

submitButton.addEventListener("click", async (_) => {
  const inputs = [
    ...form.querySelectorAll("input"),
    form.querySelector("textarea"),
  ];
  if (inputs.some(({ value }) => !value.trim()) || !resumeFile) {
    window.setStatus("error", true, "Kindly fill all the inputs.");
    return null;
  }
  let formData = new FormData();
  inputs.forEach(({ value, name }) => {
    if(name !== "files"){
      formData.append(name, value);
      console.log(name, value)
    }
  });

  formData.append("files", resumeFile);
  formData.append("role", currentRole);

  submitButton.classList.add("is-loading");
  submitButton.disabled = true;

  try {
    // const url = "https://formello.herokuapp.com/submit/5e6657f82056fd0017817f65"
    // const url = "http://localhost:3000/apiv1/talent/apply"
    const url =  "https://tech4dev.azurewebsites.net/apiv1/talent/apply"

    await axios.post(
      url,
      formData,
      {
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS",
          "Content-Type": "multipart/form-data"
        }
      }
    );
    // console.log(formData.values);
    // const myHeaders = new Headers();
    // myHeaders.append('Content-Type', 'multipart/form-data');
    // myHeaders.append('Access-Control-Allow-Origin', '*');
    // // myHeaders.append('X-Custom-Header', 'ProcessThisImmediately');

    // let response = await fetch(url, {
    //   method: 'POST',
    //   body: formData,
    // });
    // console.log(response);
    window.setStatus("success");

    inputs.forEach((input) => (input.value = ""));
    resumeReset.click();
    [...document.querySelectorAll(".is-focused")].forEach((label) =>
      label.classList.remove("is-focused")
    );
  } catch (err) {
    window.setStatus("error");
  } finally {
    submitButton.classList.remove("is-loading");
    submitButton.disabled = false;
  }
});


